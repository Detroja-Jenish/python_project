{% extends "layout.html" %}
{% block style %}
<style>
  *{
  margin: 0px;
  padding: 0px;
  box-sizing: border-box;
}
	button{
	  grid-area: auto/ 1/ auto/ span 3;
	  height: 40px;
	  width: 100px;
	  margin: auto;
	  border-radius: 20px;
	  border: 1px solid black;
	}
</style>
{% endblock %}
{% block body %}

{% set sell_report_link = "/sell_report?user=" + user %}
{% set bill_page_link = "/bill?user=" + user %}
{% set stock_link = "/stock?user=" + user %}
{% set create_bill_link = "http://127.0.0.1:5000/create_bill?user=" + user %}
{% set add_customer_link = "/addCustomer?user=" + user %}
<div class="links">
	<a href= {{ sell_report_link }}>sell report</a>
	<a href= {{ bill_page_link }} > make a bill </a>
	<a href= {{ stock_link }} > stock </a>
	<a href= {{ add_customer_link }}>Customer</a>
</div>
<template id="template">
	<div class="form-group">
		<div class="row">
			<input class="col-8" type=text name="item" id="1">
			<input class="col-2" type="number" name="quntaty" id="2"> 
			<input class="col-2 add-row" type="number" name="price" id="3">
		</div>
	</div>

	<button type="submit" id="btn-submit" value="submit">create bill</button>
</template>

<form class="container-md" id="form" action={{ create_bill_link }} method="post">
	<h1>Item - name</h1>
	<h1>Quntaty</h1>
	<h1>Price</h1>
	<div class="form-group">
		
			<select class=" form-select" aria-label="Select Customer">
				{% for customer in customers %}
					<option value={{ customer }}> {{ customer }} </option>
				{% endfor %}
			</select>
	
	</div>
	<div class="form-group">
		<div class="row">
			<input type="text" class="col-8 " name="item-1">
			<input type="number" class="col-2" name="quntaty-1"> 
			<input id="p" type="number" class="col-2 add-row" name="price-1">
		</div>
	</div>
	<button type="submit" id="btn-submit" value="submit">create bill</button>
</form>

<button id="add-row" style="background-color: black;color: white; font-size: 20px; padding: 10px; border: 1px solid grey; border-radius: 10px;">+</button>
<script>
	let form = document.getElementById("form");
	let template = document.getElementById("template");
	let add_row = document.getElementsByClassName("add-row");
	let count = 2;

	function add(){
		
		let clear_btn = document.getElementById("btn-submit");
		form.removeChild(clear_btn);
		node = document.getElementById("template");
		cloned = node.content.cloneNode(true);
		let item = cloned.getElementById("1");
		let quntaty = cloned.getElementById("2");
		let price = cloned.getElementById("3");

		let str = count.toString();

		item.setAttribute("name", ("item-"+str));
		quntaty.setAttribute("name", ("quntaty-"+str));
		price.setAttribute("name", ("price-"+str));
		form.appendChild(cloned);

		count+=1;
		console.log("hi");


	add_row[add_row.length - 1].addEventListener("input", add);
		add_row[add_row.length - 2].removeEventListener("input", add);
		console.log(add_row.length);
	}

	add_row[add_row.length - 1].addEventListener("input", add);
</script>
{% endblock %}
